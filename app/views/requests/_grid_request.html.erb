<% if @requests.any? %>
  <table class="table table-hover">
    <thead>
      <tr>
        <th><%= t "request.table.title" %></th>
        <th><%= t "request.table.description" %></th>
        <th><%= t "request.table.request_type" %></th>
        <th><%= t "request.table.request_status" %></th>
        <th><%= t "request.table.assignee" %></th>
        <th><%= t "request.table.created_by" %></th>
        <th><%= t "request.table.updated_by" %></th>
      </tr>
    </thead>
    <tbody>
      <% @requests.each do |request| %>
        <tr class="<%= generate_tag_color request %>" >
          <td><%= link_to request.title, request_path(request.id), remote: true,
            data: {toggle: "modal", target: "#dms-popup"} %></td>
          <td><%= request.description %></td>
          <td><%= request.request_type.name %></td>
          <td class="request_status"><%= request.request_status.name%></td>
          <td><%= request.assignee.name if request.assignee.present? %></td>
          <td><%= request.creater.name if request.creater.present? %></td>
          <td><%= request.updater.name if request.updater.present? %></td>
          <td>
            <% if request.allow_edit?(current_user) %>
              <%= link_to "",  edit_request_path(request), remote: true,
                class: "glyphicon glyphicon-pencil dark",
                data: {toggle: "modal", target: "#dms-popup"} %>
            <% end %>
            <% if request.request_status_id == Settings.request_status.approved &&
              current_user.department_id === Settings.department.back_officer %>
              <%= link_to "",  new_assignment_path(request_id: request.id), remote: true,
              class: "glyphicon glyphicon-plus",
              data: {toggle: "modal", target: "#dms-popup"} %>
            <% end %>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <%= will_paginate @requests %>
<% end %>
